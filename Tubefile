#!/usr/bin/env groovy
/*
 * Tubefile
 * Tube
 *
 * Builds the current branch using the version of Tube loaded by the @Library
 * annotation (master by default).
 */

echo "Environment: ${env.getEnvironment()}"
echo "env.GIT_COMMIT: ${env.GIT_COMMIT}"
echo "env.BRANCH_NAME: ${env.BRANCH_NAME}"

// Always use the current commit so that each build uses the current version to test itself.
String version = env.GIT_COMMIT ?: "master"
library "Tube@$version"

tube {
    label = "node1"
}

